<!--
  @File Name          : PM_PasswordForm.cmp
  @Description        : 
  @Author             : rajeev_sengar@persistent.com
  @Group              : 
  @Last Modified By   : rajeev_sengar@persistent.com
  @Last Modified On   : 12/26/2019, 2:50:42 AM
  @Modification Log   : 
  Ver       Date            Author      		    Modification
  1.0    12/23/2019   rajeev_sengar@persistent.com     Initial Version
-->
<aura:component controller="FormController">
    <aura:handler name="init" value="{!this}" action="{!c.init}" />
    <aura:attribute name="newPassword" type="Object" />
    <aura:attribute name="options" type="List" />
    <aura:attribute name="websiteOptions" type="List" />
    <aura:attribute name="isCategoryOtherSelected" type="Boolean" default="false" />
    <aura:attribute name="isWebsiteOtherSelected" type="Boolean" default="false" />
    <aura:attribute name="Spinner" type="Boolean" default="false" />
    <aura:attribute name="newPasswordError" type="String" />
    <aura:attribute name="passwordType" type="String" default="Password"/>
    <aura:attribute name="show" type="Boolean" default="false"/>

    <force:recordData aura:id="passwordRecordCreator" recordId="a012w000003AgX5AAK" targetFields="{!v.newPassword}"
        targetError="{!v.newPasswordError}"
        fields="Username__c,Password__c,URL__c ,Description__c,User__c,Category__c,Website__c,lastmodified__c"
        mode="EDIT" />


    <!-- Display Lightning Data Service errors -->
    <aura:if isTrue="{!not(empty(v.newPasswordError))}">
        <div class="recordError">
            <ui:message title="Error" severity="error" closable="true">
                {!v.newPasswordError}
            </ui:message>
        </div>
    </aura:if>

    <lightning:card>
        <!-- <p class="slds-p-horizontal_small"> -->
        <div class="slds-p-left_xx-small c-container">
            <lightning:layout multipleRows="true" HorizontalAlign="space" VerticalAlign="start">
                <lightning:layoutitem size="12" flexibility="auto">
                           
                                <lightning:button label="Save" iconName="utility:save" onclick="{!c.onSave}">
                                </lightning:button>
                                <lightning:button label="Clear" onclick="{!c.onClear}">
                                </lightning:button>
                               <!-- <lightning:button label="Copy" onclick="{!c.onCopy}"></lightning:button> -->
                                   
                </lightning:layoutitem>
                <lightning:layoutitem size="6" flexibility="auto">
                    <lightning:layout multipleRows="true">
                        <lightning:layoutitem size="12" flexibility="auto">
                            <!-- Username Input -->
                            <lightning:layout verticalAlign="end">
                                <lightning:layoutitem size="7" flexibility="auto">
                                    <div class="slds-form-element__label slds-form-element__control">
                                        Username</div>
                                    <lightning:buttonIcon variant="brand" iconName="utility:copy_to_clipboard"
                                        onclick="{!c.copyUsername}" title="Copy" size="xx-small" />
                                </lightning:layoutitem>
                            </lightning:layout>
                            <lightning:input aura:id="Username__c" name="Username__c"
                                value="{!v.newPassword.Username__c}" variant="label-hidden" />
                            <!-- Password Input -->
                            <lightning:layout verticalAlign="end">
                                <lightning:layoutitem size="12" flexibility="auto">
                                    <div class="slds-form-element__label slds-form-element__control">
                                        Password</div>
                                    <lightning:buttonIcon variant="brand" iconName="utility:copy_to_clipboard"
                                        onclick="{!c.copyPassword}" title="Copy" size="xx-small" />
                                    <lightning:buttonIconStateful iconName="utility:preview"
                                        onclick="{!c.showPassword}" title="Show" size="xx-small" selected="{!v.show}" class="slds-p-left_xx-small"/>
                                </lightning:layoutitem>
                            </lightning:layout>
                            <lightning:input type="{!v.passwordType}" aura:id="Password__c" name="Password__c" label="Password"
                                variant="label-hidden" value="{!v.newPassword.Password__c}" />
                            <!-- URL Input -->
                            <lightning:layout verticalAlign="end">
                                <lightning:layoutitem size="5" flexibility="auto">
                                    <div class="slds-form-element__label slds-form-element__control">
                                        URL</div>
                                    <lightning:buttonIcon variant="brand" iconName="utility:forward_up"
                                        onclick="{!c.openURL}" size="xx-small" title="Open URL" />
                                </lightning:layoutitem>
                            </lightning:layout>
                            <lightning:input aura:id="URL__c" name="URL__c" label="URL" variant="label-hidden"
                                value="{!v.newPassword.URL__c}" />
                            <!-- Description Input -->
                            <lightning:input aura:id="Description__c" name="Description__c" label="Description"
                                value="{!v.newPassword.Description__c}" />
                            <lightning:input aura:id="User__c" name="User__c" label="User"
                                value="{!v.newPassword.User__c}" />
                        </lightning:layoutitem>
                    </lightning:layout>
                </lightning:layoutitem>
                <lightning:layoutitem size="6" flexibility="auto">
                    <lightning:combobox name="Category" label="Category" value="{!v.newPassword.Category__c}"
                        options="{! v.options }" onchange="{! c.handleChange }" />
                    <aura:if isTrue="{! v.isCategoryOtherSelected }">
                        <lightning:input aura:id="PassFormId" name="Category__c" label="New Category"
                            value="{!v.newPassword.Category__c}" />
                    </aura:if>
                    <aura:if isTrue="{! !(empty(v.newPassword.Category__c))}">
                        <lightning:combobox name="Website" label="Website" value="{!v.newPassword.Website__c}"
                            options="{! v.websiteOptions }" onchange="{! c.handleWebsiteChange}" />
                        <aura:if isTrue="{! v.isWebsiteOtherSelected }">
                            <lightning:input aura:id="PassFormId" name="Website__c" label="New Website"
                                value="{!v.newPassword.Website__c}" />
                        </aura:if>
                    </aura:if>

                    <div
                        class="slds-form-element__label slds-form-element__control slds-p-top_x-small slds-p-bottom_xx-small">
                        Last
                        Modified Date/Time</div>
                    <lightning:formattedDateTime value="{!v.newPassword.lastmodified__c }" year="numeric"
                        month="numeric" day="numeric" hour="2-digit" minute="2-digit"
                        hour12="true" timeZoneName="IST"/>
                </lightning:layoutitem>
            </lightning:layout>
        </div>
        <!-- </p> -->
        <lightning:spinner aura:id="mySpinner" alternativeText="Processing.." title="Processing.." variant="brand"
            size="large" class="slds-hide" />

    </lightning:card>
</aura:component>